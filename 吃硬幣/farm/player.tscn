[gd_scene load_steps=18 format=3 uid="uid://c05qykgkdun3d"]

[ext_resource type="Texture2D" uid="uid://wce6yme26pvb" path="res://Assets/sprites/basic charactor sprites.png" id="1_l2xly"]

[sub_resource type="GDScript" id="GDScript_5j0m8"]
script/source = "extends CharacterBody2D


const SPEED = 130.0
const JUMP_VELOCITY = -370.0

var coin_counter=0
var fruit_counter=0
@onready var coin_label=%\"coin count\"
@onready var fruit_label=%\"fruit count\"
@onready var sprite = $AnimatedSprite2D 


func _physics_process(delta: float) -> void:
	# Add the gravity.
	if not is_on_floor():
		velocity += get_gravity() * delta

	# Handle jump.
	if Input.is_action_just_pressed(\"ui_accept\") and is_on_floor():
		velocity.y = JUMP_VELOCITY

	# Get the input direction and handle the movement/deceleration.
	# As good practice, you should replace UI actions with custom gameplay actions.
	var direction := Input.get_axis(\"ui_left\", \"ui_right\")
	if direction:
		velocity.x = direction * SPEED
		play_animetion(direction) 

	else:
		velocity.x = move_toward(velocity.x, 0, SPEED)

	move_and_slide()
	
func play_animetion(direction):
	if direction<0:
		$AnimatedSprite2D.play(\"left\")
	if direction>0:
		$AnimatedSprite2D.play(\"right\")

func _on_area_2d_area_entered(area: Area2D) -> void:
	if area.is_in_group(\"coin\"):
		set_coin(coin_counter + 1)
		print(coin_counter)
	if area.is_in_group(\"fruit\"):
		set_fruit(fruit_counter + 1)
		print(fruit_counter)
		
func set_coin(new_coin_count:int)->void:
	coin_counter=new_coin_count
	coin_label.text =\": \" + str(coin_counter)
	
func set_fruit(new_fruit_count:int)->void:
	fruit_counter=new_fruit_count
	fruit_label.text =\": \" + str(fruit_counter)
"

[sub_resource type="AtlasTexture" id="AtlasTexture_bi7cx"]
atlas = ExtResource("1_l2xly")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_0ba6u"]
atlas = ExtResource("1_l2xly")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_drlbk"]
atlas = ExtResource("1_l2xly")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_046pi"]
atlas = ExtResource("1_l2xly")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bks4e"]
atlas = ExtResource("1_l2xly")
region = Rect2(0, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_kn34f"]
atlas = ExtResource("1_l2xly")
region = Rect2(48, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_c0jhq"]
atlas = ExtResource("1_l2xly")
region = Rect2(96, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_21q4f"]
atlas = ExtResource("1_l2xly")
region = Rect2(144, 96, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_pcpg6"]
atlas = ExtResource("1_l2xly")
region = Rect2(0, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_86iom"]
atlas = ExtResource("1_l2xly")
region = Rect2(48, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_oklmw"]
atlas = ExtResource("1_l2xly")
region = Rect2(96, 144, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_wfiwq"]
atlas = ExtResource("1_l2xly")
region = Rect2(144, 144, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_tefr3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bi7cx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0ba6u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_drlbk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_046pi")
}],
"loop": true,
"name": &"front",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bks4e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kn34f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c0jhq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_21q4f")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pcpg6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_86iom")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oklmw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wfiwq")
}],
"loop": true,
"name": &"right",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_tkrr0"]
radius = 7.0

[sub_resource type="CircleShape2D" id="CircleShape2D_32bll"]
radius = 7.07107

[node name="CharacterBody2D" type="CharacterBody2D"]
script = SubResource("GDScript_5j0m8")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_tefr3")
animation = &"front"
autoplay = "front"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_tkrr0")

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("CircleShape2D_32bll")

[connection signal="area_entered" from="Area2D" to="." method="_on_area_2d_area_entered"]
